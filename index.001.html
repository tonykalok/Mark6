<!DOCTYPE html>
<html lang="zh-HK">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>六合彩</title>

  <style>
*{box-sizing:border-box}body{font-family:system-ui;background:#f5f7fa;margin:0;padding:16px}.container{max-width:600px;margin:auto;background:#fff;border-radius:14px;padding:24px;box-shadow:0 10px 25px rgba(0,0,0,.08)}h1{text-align:center;margin-bottom:6px}.subtitle{text-align:center;color:#666;margin-bottom:24px}.form-group{margin-bottom:16px}label{display:block;margin-bottom:6px;font-weight:600}input{width:100%;padding:10px;font-size:16px;border-radius:8px;border:1px solid #ccc}button{width:100%;margin-top:12px;padding:14px;font-size:16px;font-weight:700;border:none;border-radius:10px;background-color:#007bff;color:#fff;cursor:pointer}button:hover{background-color:#0056cc}.error{color:#d93025;margin-top:12px;text-align:center}.results{margin-top:28px}.set{background:#f0f3f8;border-radius:12px;padding:14px;margin-bottom:14px;display:flex;justify-content:center;gap:10px;flex-wrap:wrap}.ball{width:46px;height:46px;background:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px;box-shadow:0 4px 10px rgba(0,0,0,.15)}.copy-btn{background:#28a745}.copy-btn:hover{background:#1e7e34}
  </style>
</head>
<body>

<div class="container">
  <h1>六合彩</h1>
  <div class="subtitle">隨機生成 1–49 的排序幸運號碼</div>

  <div class="form-group">
    <label>每組號碼數量（1–49）</label>
    <input type="number" id="numbersCount" min="6" max="49" value="6">
  </div>

  <div class="form-group">
    <label>生成組數（最多 4 組）</label>
    <input type="number" id="setsCount" min="1" max="4" value="1">
  </div>

  <button onclick="generate()">生成號碼</button>

  <div id="error" class="error"></div>

  <div id="results" class="results"></div>

  <button id="copyBtn" class="copy-btn" style="display:none" onclick="copyResults()">
    📋 複製號碼
  </button>
</div>

<script>
  function generate() {
    const numbersCount = +document.getElementById("numbersCount").value;
    const setsCount = +document.getElementById("setsCount").value;
    const error = document.getElementById("error");
    const results = document.getElementById("results");
    const copyBtn = document.getElementById("copyBtn");

    error.textContent = "";
    results.innerHTML = "";
    copyBtn.style.display = "none";

    if (
      numbersCount < 1 || numbersCount > 49 ||
      setsCount < 1 || setsCount > 4
    ) {
      error.textContent = "請輸入有效數字（每組最多 49 個，最多 4 組）。";
      return;
    }

    const allFinalResults = [];

    for (let i = 0; i < setsCount; i++) {
      const set = new Set();
      while (set.size < numbersCount) {
        set.add(Math.floor(Math.random() * 49) + 1);
      }
      const finalNumbers = Array.from(set).sort((a,b) => a-b);
      allFinalResults.push(finalNumbers);

      const setDiv = document.createElement("div");
      setDiv.className = "set";

      finalNumbers.forEach(() => {
        const ball = document.createElement("div");
        ball.className = "ball";
        ball.textContent = Math.floor(Math.random() * 49) + 1;
        setDiv.appendChild(ball);
      });

      results.appendChild(setDiv);

      animateSet(setDiv, finalNumbers);
    }

    copyBtn.style.display = "block";
  }

  function animateSet(container, finalNumbers) {
    const balls = container.querySelectorAll(".ball");
    const spinInterval = setInterval(() => {
      balls.forEach(ball => {
        ball.textContent = Math.floor(Math.random() * 49) + 1;
      });
    }, 80);

    setTimeout(() => {
      clearInterval(spinInterval);
      balls.forEach((ball, index) => {
        ball.textContent = finalNumbers[index];
      });
    }, 2000);
  }

  function copyResults() {
    const sets = document.querySelectorAll(".set");
    let text = "";
    sets.forEach((set, i) => {
      const nums = Array.from(set.querySelectorAll(".ball"))
        .map(b => b.textContent)
        .join(", ");
      text += `第 ${i + 1} 組：${nums}\n`;
    });

    navigator.clipboard.writeText(text);
    alert("號碼已複製 ✅");
  }
</script>

</body>
</html>